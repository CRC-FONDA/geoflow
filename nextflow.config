process {
	container = 'floriankaterndahl/geoflow:latest'
}

params {
	input_dir = ""
	input_dirP = ""
	output_dir_indices = ""
	n_cpus_indices = 1
	tx = '61'
	ty = '48'
	s0 = 'S'
	// Uncomment every QA-flag, that should be filtered (apart from the last one, which always needs to be uncommented)
	// Currently, this coincides with the default FORCE selection. For further information, see help of 'QAI2bit_mask.py'
	quality_flags = [
        	"NODATA",
	        "CLOUD_BUFF",
	        "CLOUD_OPAQUE",
	        "CLOUD_CIRRUS",
	        "CLOUD_SHADOW",
	        "SNOW",
	        //"WATER",
	        //"AEROSOL_INTERPOLATED",
	        //"AEROSOL_HIGH",
	        //"AEROSOL_FILL",
	        "SUBZERO",
	        "SATURATION",
	        //"HIGH_ZENITH",
	        //"ILLUMINATION_MEDIUM",
	        //"ILLUMINATION_POOR",
        	//"ILLUMINATION_SHADOW",
	        //"SLOPE",
	        //"WATER_VAPOR",
	        "EMPTY"
	]

	quality_cat = quality_flags.join(" ")

	// Time frames for which STMs should get generated. Currently, they must be exclusive as an item in a channel cannot be passed onto multiple output channels
	// format: [start, end] with the date format being "YYYYMMDD"
	stm_timeframes = [
		['20150101', '20201231']
	]

	// list would work just fine, but to have the same type, I'm using a Map as well.
        // TODO Would probably be better to adjust Sentinel/Landsat band descriptions
        // TODO use this Map for Indices Workflow as well (and rename & reposition it)
        spectral_indices_mapping= [
                "NDVI":         "NDVI",
                "EVI":          "EVI",
                "NBR":          "NBR",
                "NDTI":         "NDTI",
                "ARVI":         "ARVI",
                "SAVI":         "SAVI",
                "SARVI":        "SARVI"
        ]

	stm_band_mapping_sentinel = [
		"BLUE":     "BOA-01",
		"GREEN":    "BOA-02",
		"RED":      "BOA-03",
		"RE1":      "BOA-04",
		"RE2":      "BOA-05",
		"RE3":      "BOA-06",
		"BNIR":     "BOA-07",
		"NIR":      "BOA-08",
		"SWIR1":    "BOA-09",
		"SWIR2":    "BOA-10"
	]

	stm_band_mapping_landsat = [
	        "BLUE":     "BOA-01",
	        "GREEN":    "BOA-02",
	        "RED":      "BOA-03",
	        "NIR":      "BOA-04",
	        "SWIR1":    "BOA-05",
	        "SWIR2":    "BOA-06"
	]

	calculate_stms = [
		"MEAN":		0,
		"STD":		1,
		"VAR":		2,
		"MIN":		3,
//		"MEDIAN":	4,
//		"MAX":		5,
//		"SUM":		6,
//		"PRODUCT":	7,
//		"RANGE":	8,
//		"IQR":		9,
//		"ANY":		10,
//		"ALL":		11,
		"P05":		19,
		"P25":		39,
		"P75":		89,
		"P95":		109
	]

	lucas_query = "nuts0 == 'DE' and year == 2018"
	lucas_survey = "/data/Dagobah/fonda/shk/geoflow/lucas/lucas_harmo_uf_2018.csv"
	lucas_geom = "/data/Dagobah/fonda/shk/geoflow/lucas/lucas_geom.gpkg"
	lucas_epsg = 3035
	publish_lucas_subset = true
	lucas_subset_dir = "/data/Dagobah/fonda/shk/geoflow/test"
}

docker {
	enabled = true
	remove = true
	temp = 'auto'
	fixOwnership = true
}

executor {
	$local{
        	cpus = 10 
        	memory = '200 GB'
	}
}


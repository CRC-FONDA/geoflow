process {
	container = 'floriankaterndahl/geoflow:latest'
}

params {
	input_dir = ""
	input_dirP = ""
	output_dir_indices = ""
	n_cpus_indices = 1
	tx = '61'
	ty = '48'
	s0 = 'S'
	// Uncomment every QA-flag, that should be filtered (apart from the last one, which always needs to be uncommented)
	// Currently, this coincides with the default FORCE selection. For further information, see help of 'QAI2bit_mask.py'
	quality_flags = [
        	"NODATA",
	        "CLOUD_BUFF",
	        "CLOUD_OPAQUE",
	        "CLOUD_CIRRUS",
	        "CLOUD_SHADOW",
	        "SNOW",
	        //"WATER",
	        //"AEROSOL_INTERPOLATED",
	        //"AEROSOL_HIGH",
	        //"AEROSOL_FILL",
	        "SUBZERO",
	        "SATURATION",
	        //"HIGH_ZENITH",
	        //"ILLUMINATION_MEDIUM",
	        //"ILLUMINATION_POOR",
        	//"ILLUMINATION_SHADOW",
	        //"SLOPE",
	        //"WATER_VAPOR",
	        "EMPTY"
	]

	quality_cat = quality_flags.join(" ")

	// list would work just fine, but to have the same type, I'm using a Map as well.
        // TODO Would probably be better to adjust Sentinel/Landsat band descriptions
        // TODO use this Map for Indices Workflow as well (and rename & reposition it)
        spectral_indices_mapping= [
                "NDVI":         "NDVI",
                "EVI":          "EVI",
                "NBR":          "NBR",
                "NDTI":         "NDTI",
                "ARVI":         "ARVI",
                "SAVI":         "SAVI",
                "SARVI":        "SARVI"
        ]

	stm_band_mapping_sentinel = [
		"BLUE":     "BOA-01",
		"GREEN":    "BOA-02",
		"RED":      "BOA-03",
		"RE1":      "BOA-04",
		"RE2":      "BOA-05",
		"RE3":      "BOA-06",
		"BNIR":     "BOA-07",
		"NIR":      "BOA-08",
		"SWIR1":    "BOA-09",
		"SWIR2":    "BOA-10"
	]

	stm_band_mapping_landsat = [
	        "BLUE":     "BOA-01",
	        "GREEN":    "BOA-02",
	        "RED":      "BOA-03",
	        "NIR":      "BOA-04",
	        "SWIR1":    "BOA-05",
	        "SWIR2":    "BOA-06"
	]

	calculate_stms = [
		"MEAN":		0,
		"STD":		1,
		"MIN":		2,
		"P05":		3,
		"P25":		4,
//		"MEDIAN":	5,
//		"P75":		6,
//		"P95":		7,
//		"MAX":		8,
//		"SUM":		9,
//		"PRODUCT":	10,
//		"RANGE":	11,
//		"IQR":		12,
//		"ANY":		13,
//		"ALL":		14
	]
		
	
}

docker {
	enabled = true
	remove = true
	temp = 'auto'
	fixOwnership = true
}

